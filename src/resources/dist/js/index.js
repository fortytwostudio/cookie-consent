typeof Craft.CookieConsent>"u"&&(Craft.CookieConsent={});Craft.CookieConsent.CookieIndex=Craft.BaseElementIndex.extend({$newTemplateBtnGroup:null,$newTemplateBtn:null,init(e,t,n){this.on("selectSource",this.createButton.bind(this)),this.on("selectSite",this.createButton.bind(this)),this.base(e,t,n),$("#action-buttons").addClass("flex")},createButton:function(){this.$source!==null&&(this.$newTemplateBtnGroup!==null&&this.$newTemplateBtnGroup.remove(),this.$newTemplateBtnGroup=$('<div class="btngroup" data-wrapper/>'),this.$newTemplateBtn=Craft.ui.createButton({label:Craft.t("forty-cookieconsent","New Cookie"),spinner:!0}).addClass("submit add icon").appendTo(this.$newTemplateBtnGroup),this.addListener(this.$newTemplateBtn,"click",()=>{this._createTemplate()}),this.addButton(this.$newTemplateBtnGroup))},_createTemplate:async function(){this.$source.data("handle"),Craft.sendActionRequest("POST","forty-cookieconsent/cookies/edit").then(({data:e})=>{document.location.href=Craft.getUrl(e.cpEditUrl,{fresh:1})})},_scanForCookies:async function(){Craft.sendActionRequest("GET","forty-cookieconsent/cookies/scan").then(e=>{e.success?console.log("✅ Puppeteer script ran successfully:",e.output):(console.error("❌ Puppeteer failed to run."),console.log(e))}).catch(e=>{console.error("❌ Error:",e)})}});Craft.registerElementIndexClass("fortytwostudio\\cookieconsent\\elements\\CookieElement",Craft.CookieConsent.CookieIndex);
