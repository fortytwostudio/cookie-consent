typeof Craft.CookieConsent>"u"&&(Craft.CookieConsent={});Craft.CookieConsent.CookieIndex=Craft.BaseElementIndex.extend({$newTemplateBtnGroup:null,$newTemplateBtn:null,init(t,e,n){this.on("selectSource",this.createButton.bind(this)),this.on("selectSite",this.createButton.bind(this)),this.base(t,e,n),$("#action-buttons").addClass("flex")},createButton:function(){this.$source!==null&&(this.$newTemplateBtnGroup!==null&&this.$newTemplateBtnGroup.remove(),this.$newTemplateBtnGroup=$('<div class="btngroup" data-wrapper/>'),this.$newTemplateBtn=Craft.ui.createButton({label:Craft.t("forty-cookieconsent","New Cookie"),spinner:!0}).addClass("submit add icon").appendTo(this.$newTemplateBtnGroup),this.addListener(this.$newTemplateBtn,"click",()=>{this._createTemplate()}),this.addButton(this.$newTemplateBtnGroup),this.$scanBtn=Craft.ui.createButton({label:Craft.t("forty-cookieconsent","Scan for Cookies")}).addClass("add icon"),this.addListener(this.$scanBtn,"click",()=>{this._scanForCookies()}),this.addButton(this.$scanBtn))},_createTemplate:async function(){this.$source.data("handle"),Craft.sendActionRequest("POST","forty-cookieconsent/cookies/edit").then(({data:t})=>{document.location.href=Craft.getUrl(t.cpEditUrl,{fresh:1})})},_scanForCookies:async function(){Craft.sendActionRequest("GET","forty-cookieconsent/cookies/scan",{data:{url:Craft.siteUrl}}).then(t=>{console.log("✅ Success:",t.data)}).catch(t=>{console.error("❌ Error:",t)})}});Craft.registerElementIndexClass("fortytwostudio\\cookieconsent\\elements\\CookieElement",Craft.CookieConsent.CookieIndex);
